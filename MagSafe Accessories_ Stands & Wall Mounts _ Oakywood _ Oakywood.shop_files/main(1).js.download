(()=>{"use strict";const t={conversion:"clients/conversion.js",main:"clients/main.js",optOut:"clients/opt-out.js",hosts:[["static.profity.ch","ch"],["static.shopmate.de","de"],["static.pl.profity.shop","pl"],["static.sparoo.ch","sparoo"],["static.profity.online","online"],["static.profity.se","se"],["static.profity.at","at"],["static.profity.it","it"],["static.profity.uk","uk"],["www.profity.ch","ch"],["profity.ch.test","local"]],ch:{base_url:"https://www.profity.ch",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[1688,1335,1196,334,26]},pl:{base_url:"https://pl.profity.shop",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid"},de:{base_url:"https://www.shopmate.de",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},sparoo:{base_url:"https://www.sparoo.ch",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},online:{base_url:"https://www.profity.online",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid"},at:{base_url:"https://www.profity.at",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},uk:{base_url:"https://www.profity.uk",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},se:{base_url:"https://www.profity.se",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},it:{base_url:"https://www.profity.it",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]},local:{base_url:"https://profity.ch.test",banner_api_url:"https://sovendus.getback.ch",parameter_name:"puid",shopIds:[]}};let e;function n(t){let n=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}(e.parameter_name)||"";n.indexOf(t)>=0||(n?n+=","+t:n=t,function(t,e,n,o){let r;{let t=new Date;t.setTime(t.getTime()+2592e6),r=t.toUTCString()}o=o||"Lax",document.cookie=t+"="+e+"; path=/; domain=."+function(t){let e=window.location.host.split(".").reverse();return e.length>=3&&e[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?e[2]+"."+e[1]+"."+e[0]:e[1]+"."+e[0]}()+"; expires="+r+";;SameSite="+o}(e.parameter_name,n))}!function(o){if(!(o||(o=function(){let e={},n=document.currentScript;return n?(n.src.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,n,o){e[n]=o})),e.env||t.hosts.forEach((function(t){if(n.src.indexOf(t[0])>=0)return e.env=t[1],!1})),e):(console.log("Profity script not found."),!1)}())&&o.env))return;e=t[o.env];const r=function(){let t={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,n,o){t[n]=o})),t}()[e.parameter_name];if(!r)return;const a=localStorage.getItem("profity_opt_out");if(a){const t=JSON.parse(a);if(t.timestamp>Date.now()-3e5)return t.value?void console.log("User has opted out"):n(r)}!function(t,e,n,o,r){let a;if(n=n||null,(r=r||{}).beforeSend&&"function"==typeof r.beforeSend&&r.beforeSend(),e.indexOf("callback=?")>-1){a="_jsonp_"+Math.round(1e11*Math.random()),window[a]=function(t){o(t)},e=e.replace("callback=?","callback="+a);let t=document.createElement("script");return t.src=e,void document.head.appendChild(t)}let s=!("async"in r)||r.async,i=new XMLHttpRequest;if(i.withCredentials=!0,i.open(t,e,s),i.onload=function(){if("function"==typeof o){let t=this.response;if("application/json"===this.getResponseHeader("content-type")||"application/json"===r.dataType)try{t=JSON.parse(this.response)}catch(e){console.log("error parsing ",this.response,t)}a?window[a](t):o(t)}},r.onError&&"function"==typeof r.onError&&(i.onerror=r.onError),r.dataType&&i.setRequestHeader("Accept",r.dataType),r.dataType||"POST"!==t||i.setRequestHeader("Accept","application/json"),"POST"===t){if(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),"object"==typeof n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t+="&"+encodeURIComponent(e)+"="+encodeURIComponent(n[e]));t.length>0&&(t=t.substr(1)),n=t}i.send(n)}else i.send()}("POST","https://cookie.profity.ch/?opt-check","",(function(t){localStorage.setItem("profity_opt_out",JSON.stringify({timestamp:Date.now(),value:parseInt(t.opt_out)})),t.opt_out?console.log("User has opted out"):n(r)}),undefined)}()})();